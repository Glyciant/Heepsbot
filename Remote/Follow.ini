alias twitch_check_new {
  if (!$1-) { return }
  if (!%stream_auto_ [ $+ [ $1 ] ]) { .timer[FOLLOWERS_CHECK_ $+ $1 $+ ] off | return }
  if ($me !ison $1) { .timer[FOLLOWERS_CHECK_ $+ $1 $+ ] off | return }
  var %u = https://api.twitch.tv/kraken/channels/ $+ $2 $+ /follows?limit=1&nocache= $+ $ticks
  var %v = twc_ $+ $ticks
  JSONOpen -ud %v %u
  if (%JSONError) { goto end | return }
  var %followed = $json(%v,follows,0,created_at)
  if (%followed) {
    var %followed = $replace($remove(%followed,$chr(122)),$chr(116),$chr(32))
    var %ctime = $ctime(%followed)
    var %followed = $date(%ctime,ddd ddoo mmm yyyy HH:nn:ss)
    var %followed_ago = $_timeago($calc($ctime - %ctime)).all
  }
  var %type = $json(%v,follows,0,user,type)
  var %name = $json(%v,follows,0,user,display_name)
  if (!%name) { var %name = $json(%v,follows,0,user,name) }
  if (!%name) { goto end | return }
  var %uu = https://api.twitch.tv/kraken/streams/ $+ $2
  var %vv = twl_ $+ $ticks
  JSONOpen -ud %vv %uu
  if ($readini(BotSettings.ini,$1,LastFollower) != %name) { writeini -n BotSettings.ini $1 LastFollower %name }
  if (%JSONError) { goto end | return }
  if ($readini(BotSettings.ini,$1,LastFollower) = %name) { return }
  if (!$hget(ls_followers_ [ $+ [ $2 ] $+ ] _ [ $+ [ $1 ] ])) { hmake ls_followers_ [ $+ [ $2 ] $+ ] _ [ $+ [ $1 ] ] 500 }
  if ($hfind(ls_followers_ [ $+ [ $2 ] $+ ] _ [ $+ [ $1 ] ],%name)) { goto end | return }
  hadd -m ls_followers_ [ $+ [ $2 ] $+ ] _ [ $+ [ $1 ] ] %name $ctime(%followed)
  if ($hget(ls_followers_last_ [ $+ [ $2 ] $+ ] _ [ $+ [ $1 ] ])) { hfree $v1 }
  hadd -m ls_followers_last_ [ $+ [ $2 ] $+ ] _ [ $+ [ $1 ] ] %name $ctime(%followed)
  if ($BotSetting(AutoFollow,$1) != $null) {
    message $1 $replace($iif($BotSetting(FollowMessage,$1),$BotSetting(FollowMessage,$1),Thanks for following - ^NICK^),^USER^,$user(%name),^NICK^,%name,^CHAN^,$owner)
  }
  FollowAddPoints %name $1
  if ($readini(BotSettings.ini,$1,Status) != $null) {
    writeini -n BotSettings.ini $1 Follows $calc($BotSetting(Follows,$1) + 1)
    if ($readini(BotSettings.ini,$1,Follows) > $readini(BotSettings.ini,$1,FollowRecord)) || ($readini(BotSettings.ini,$1,FollowRecord) = $null) {
      writeini -n BotSettings.ini $1 FollowRecord $calc($readini(BotSettings.ini,$1,FollowRecord) + 1) 
    }
  }
  :end
  JSONClose %v
  JSONClose %vv
}
